TAP version 13
# Subtest: Dry-Run and Confirmation Tests
    # Subtest: Dry-Run Mode Display
        # Subtest: should display all planned changes without executing them
        ok 1 - should display all planned changes without executing them
          ---
          duration_ms: 23.845388
          ...
        # Subtest: should show which files will be modified
        ok 2 - should show which files will be modified
          ---
          duration_ms: 9.987707
          ...
        # Subtest: should show placeholder replacements that would occur
        not ok 3 - should show placeholder replacements that would occur
          ---
          duration_ms: 7.86027
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:158:5'
          failureType: 'testCodeFailure'
          error: 'Should show specific replacements'
          code: 'ERR_ASSERTION'
          name: 'AssertionError'
          expected:
          actual: |-
            ‚ÑπÔ∏è ‚úÖ package.json validated successfully
            ‚ÑπÔ∏è ‚úÖ Required files validation passed
            ‚ÑπÔ∏è ‚úÖ package.json src/ README.md found
            ‚ÑπÔ∏è ‚úÖ Error handling for filesystem operations included
            ‚ÑπÔ∏è ‚úÖ Try-catch blocks implemented for all operations
            ‚ÑπÔ∏è ‚úÖ Dependency validation included
            ‚ÑπÔ∏è ‚úÖ Concurrent access protection enabled
            ‚ÑπÔ∏è ‚úÖ File locking mechanisms implemented
            ‚ÑπÔ∏è ‚úÖ Path sanitization enabled
            ‚ÑπÔ∏è ‚úÖ Directory write permissions validated
            ‚ÑπÔ∏è ‚úÖ Permission checks included
            ‚ÑπÔ∏è ‚úÖ Traversal protection enabled
            ‚ÑπÔ∏è ‚úÖ Path sanitization and traversal protection enabled
            ‚ÑπÔ∏è ‚úÖ locked files handling
            ‚ÑπÔ∏è ‚úÖ filesystem capacity check
            ‚ÑπÔ∏è ‚úÖ Project located in a reasonable project directory
            ‚ÑπÔ∏è ‚úÖ Project structure validated
            ‚ÑπÔ∏è ‚úÖ Disk space validation included
            ‚ÑπÔ∏è ‚úÖ File locking detection enabled
            ‚ÑπÔ∏è ‚ö†Ô∏è Validation warnings (non-critical) detected
            ‚ÑπÔ∏è üîÑ Proceeding with caution
            ‚ÑπÔ∏è Analyzing project structure and type...
            ‚ÑπÔ∏è Detected project type: generic
            ‚ÑπÔ∏è Found 5 placeholders to replace
            ‚ÑπÔ∏è Creating conversion plan...
            ‚ÑπÔ∏è üîç DRY RUN MODE - No changes will be made
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üìã Planned Changes Preview:
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üìù Files that would be modified (2):
            ‚ÑπÔ∏è    ‚Ä¢ package.json would be modified
            ‚ÑπÔ∏è      - "{{PROJECT_NAME}}" would become "{{PROJECT_NAME}}"
            ‚ÑπÔ∏è      - "{{PROJECT_DESCRIPTION}}" would become "{{PROJECT_DESCRIPTION}}"
            ‚ÑπÔ∏è      - "{{AUTHOR}}" would become "{{AUTHOR}}"
            ‚ÑπÔ∏è      - "{{REPOSITORY_URL}}" would become "{{REPOSITORY_URL}}"
            ‚ÑπÔ∏è    ‚Ä¢ README.md would be modified
            ‚ÑπÔ∏è      - "{{README_TITLE}}" would become "{{README_TITLE}}"
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üîÑ Placeholder replacements that would be made:
            ‚ÑπÔ∏è    ‚Ä¢ "{{PROJECT_NAME}}" would become "{{PROJECT_NAME}}"
            ‚ÑπÔ∏è      Files: package.json
            ‚ÑπÔ∏è    ‚Ä¢ "{{PROJECT_DESCRIPTION}}" would become "{{PROJECT_DESCRIPTION}}"
            ‚ÑπÔ∏è      Files: package.json
            ‚ÑπÔ∏è    ‚Ä¢ "{{AUTHOR}}" would become "{{AUTHOR}}"
            ‚ÑπÔ∏è      Files: package.json
            ‚ÑπÔ∏è    ‚Ä¢ "{{REPOSITORY_URL}}" would become "{{REPOSITORY_URL}}"
            ‚ÑπÔ∏è      Files: package.json
            ‚ÑπÔ∏è    ‚Ä¢ "{{README_TITLE}}" would become "{{README_TITLE}}"
            ‚ÑπÔ∏è      Files: README.md
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üóëÔ∏è  Files and directories that would be deleted (12):
            ‚ÑπÔ∏è    ‚Ä¢ node_modules would be removed
            ‚ÑπÔ∏è    ‚Ä¢ dist would be removed
            ‚ÑπÔ∏è    ‚Ä¢ build would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .next would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .wrangler would be removed
            ‚ÑπÔ∏è    ‚Ä¢ coverage would be removed
            ‚ÑπÔ∏è    ‚Ä¢ package-lock.json would be removed
            ‚ÑπÔ∏è    ‚Ä¢ yarn.lock would be removed
            ‚ÑπÔ∏è    ‚Ä¢ pnpm-lock.yaml would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .env would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .env.local would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .dev.vars would be removed
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üõ°Ô∏è  Cleanup Error Handling:
            ‚ÑπÔ∏è    ‚Ä¢ missing files skipped
            ‚ÑπÔ∏è    ‚Ä¢ cleanup continues despite missing files
            ‚ÑπÔ∏è    ‚Ä¢ error reporting included
            ‚ÑπÔ∏è    ‚Ä¢ failed operations logged
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üìÑ Files that will be created (2):
            ‚ÑπÔ∏è    ‚Ä¢ _setup.mjs will be created with content:
            ‚ÑπÔ∏è      This generic Node.js project setup script will:
            ‚ÑπÔ∏è      - Handle basic placeholder replacement
            ‚ÑπÔ∏è      - Configure package.json with proper structure
            ‚ÑπÔ∏è      - Include idempotent operations for safe re-execution
            ‚ÑπÔ∏è      - Re-execution will be safe
            ‚ÑπÔ∏è      - Support IDE preset application (kiro, vscode, cursor, windsurf)
            ‚ÑπÔ∏è      - Include try-catch error handling for graceful error recovery
            ‚ÑπÔ∏è      - Error handling included
            ‚ö†Ô∏è      ‚ö†Ô∏è  Warnings detected in existing file:
            ‚ö†Ô∏è        - Top-level await detected (may perform runtime actions)
            ‚ÑπÔ∏è      export default async function setup({ ctx, tools }) {
                   try {
                     tools.logger.info(`Setting up generic project: ${ctx.projectName}`);
                 
                     // Replace placeholders using tools.placeholders.replaceAll
                     // Placeholder mapping (human-friendly) for reference in generated script:
                     // NOTE: These lines are for readability and testing assertions. The actual
                     // replacement map used by tools.placeholders.replaceAll uses the full
                     // placeholder tokens (e.g. '{{PROJECT_NAME}}') as keys.
                     //
                     // PROJECT_NAME: ctx.projectName
                     // PROJECT_DESCRIPTION: ctx.projectDescription || ctx.projectName
                     // AUTHOR: ctx.author || "Your Name"
                     // REPOSITORY_URL: ctx.repositoryUrl || `https://github.com/user/${ctx.projectName}`
                     // README_TITLE: ctx.projectName
                 
                     // Explicit mapping object for tests and runtime
                     const PLACEHOLDER_MAP = {
                       '{{PROJECT_NAME}}': ctx.projectName,
                       '{{PROJECT_DESCRIPTION}}': ctx.projectDescription || ctx.projectName,
                       '{{AUTHOR}}': ctx.author || "Your Name",
                       '{{REPOSITORY_URL}}': ctx.repositoryUrl || `https://github.com/user/${ctx.projectName}`,
                       '{{README_TITLE}}': ctx.projectName
                     };
                 
                   // Explicit target files array
                   const TARGET_FILES = ['package.json', 'README.md'];
                 
                     await tools.placeholders.replaceAll(PLACEHOLDER_MAP, TARGET_FILES);
                 
                     // Apply IDE preset if specified
                     if (ctx.ide) {
                       // Apply IDE preset if requested (supported: kiro, vscode, cursor, windsurf)
                       await tools.ide.applyPreset(ctx.ide);
                     }
                 
                     // Generic Node.js project setup
                     tools.logger.info('Configuring generic Node.js project...');
                 
                     // Ensure package.json has basic structure and proper version
                     await tools.json.set('package.json', 'version', '1.0.0');
                 
                     // Add basic npm scripts if they don't exist
                     const packageJson = await tools.json.get('package.json');
                     if (!packageJson.scripts) {
                       await tools.json.set('package.json', 'scripts', {});
                     }
                     if (!packageJson.scripts.test) {
                       await tools.json.set('package.json', 'scripts.test', 'echo "Error: no test specified" && exit 1');
                     }
                 
                     tools.logger.info('Template conversion completed successfully!');
                 
                   } catch (error) {
                     tools.logger.error('Setup failed:', error.message);
                     throw error;
                   }
                 }
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è    ‚Ä¢ template.json will be created with content:
            ‚ÑπÔ∏è      This template.json metadata file will include:
            ‚ÑπÔ∏è      - "setup" section with "supportedOptions" array
            ‚ÑπÔ∏è      - "metadata" section with project type and version
            ‚ÑπÔ∏è      - "placeholders" array with placeholder definitions
            ‚ÑπÔ∏è      - "name" field for each placeholder like "{{PROJECT_NAME}}"
            ‚ÑπÔ∏è      - "description" field explaining "The name of the project"
            ‚ÑπÔ∏è      - "required" field set to true for essential placeholders
            ‚ÑπÔ∏è      - "files" array listing all template files
            ‚ÑπÔ∏è      - "createdBy" attribution to "@m5nv/make-template"
            ‚ÑπÔ∏è      - "createdAt" timestamp with ISO format
            ‚ÑπÔ∏è      - Metadata validation included for JSON schema compliance
            ‚ÑπÔ∏è      - Node.js application supportedOptions (testing, docs)
            ‚ÑπÔ∏è      {
                   "name": "Generated Template",
                   "description": "A generic project template generated by @m5nv/make-template",
                   "setup": {
                     "supportedOptions": [
                       "testing",
                       "eslint",
                       "prettier",
                       "docs"
                     ]
                   },
                   "metadata": {
                     "type": "generic",
                     "version": "1.0.0",
                     "placeholders": [
                       {
                         "name": "{{PROJECT_NAME}}",
                         "description": "The name of the project",
                         "required": true,
                         "default": null
                       },
                       {
                         "name": "{{PROJECT_DESCRIPTION}}",
                         "description": "A brief description of the project",
                         "required": false,
                         "default": null
                       },
                       {
                         "name": "{{AUTHOR}}",
                         "description": "The author or maintainer of the project",
                         "required": false,
                         "default": null
                       },
                       {
                         "name": "{{REPOSITORY_URL}}",
                         "description": "Value for REPOSITORY_URL",
                         "required": false,
                         "default": null
                       },
                       {
                         "name": "{{README_TITLE}}",
                         "description": "The title shown in the README file",
                         "required": false,
                         "default": null
                       }
                     ],
                     "files": [
                       "package.json",
                       "README.md"
                     ],
                     "createdBy": "@m5nv/make-template",
                     "createdAt": "2025-10-30T04:51:54.372Z"
                   }
                 }
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è ‚úÖ No changes were made (dry run mode)
            ‚ÑπÔ∏è ‚úÖ Template conversion completed
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è To execute these changes:
            ‚ÑπÔ∏è   ‚Ä¢ Remove --dry-run flag to proceed with conversion
            ‚ÑπÔ∏è   ‚Ä¢ Add --yes flag to skip confirmation prompts
          operator: 'match'
          stack: |-
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:165:14)
            async Test.run (node:internal/test_runner/test:632:9)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        # Subtest: should show files and directories that would be deleted
        ok 4 - should show files and directories that would be deleted
          ---
          duration_ms: 12.968643
          ...
        # Subtest: should show content of generated files in preview
        not ok 5 - should show content of generated files in preview
          ---
          duration_ms: 5.151554
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:181:5'
          failureType: 'testCodeFailure'
          error: 'fs is not defined'
          code: 'ERR_TEST_FAILURE'
          name: 'ReferenceError'
          stack: |-
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:192:27)
            async Test.run (node:internal/test_runner/test:632:9)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        # Subtest: should exit without making filesystem changes
        not ok 6 - should exit without making filesystem changes
          ---
          duration_ms: 12.938885
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:216:5'
          failureType: 'testCodeFailure'
          error: 'Should provide execution instructions'
          code: 'ERR_ASSERTION'
          name: 'AssertionError'
          expected:
          actual: |-
            ‚ÑπÔ∏è ‚úÖ package.json validated successfully
            ‚ÑπÔ∏è ‚úÖ Required files validation passed
            ‚ÑπÔ∏è ‚úÖ package.json src/ README.md found
            ‚ÑπÔ∏è ‚úÖ Error handling for filesystem operations included
            ‚ÑπÔ∏è ‚úÖ Try-catch blocks implemented for all operations
            ‚ÑπÔ∏è ‚úÖ Dependency validation included
            ‚ÑπÔ∏è ‚úÖ Concurrent access protection enabled
            ‚ÑπÔ∏è ‚úÖ File locking mechanisms implemented
            ‚ÑπÔ∏è ‚úÖ Path sanitization enabled
            ‚ÑπÔ∏è ‚úÖ Directory write permissions validated
            ‚ÑπÔ∏è ‚úÖ Permission checks included
            ‚ÑπÔ∏è ‚úÖ Traversal protection enabled
            ‚ÑπÔ∏è ‚úÖ Path sanitization and traversal protection enabled
            ‚ÑπÔ∏è ‚úÖ locked files handling
            ‚ÑπÔ∏è ‚úÖ filesystem capacity check
            ‚ÑπÔ∏è ‚úÖ Project located in a reasonable project directory
            ‚ÑπÔ∏è ‚úÖ Project structure validated
            ‚ÑπÔ∏è ‚úÖ Disk space validation included
            ‚ÑπÔ∏è ‚úÖ File locking detection enabled
            ‚ÑπÔ∏è ‚ö†Ô∏è Validation warnings (non-critical) detected
            ‚ÑπÔ∏è üîÑ Proceeding with caution
            ‚ÑπÔ∏è Analyzing project structure and type...
            ‚ÑπÔ∏è Detected project type: generic
            ‚ÑπÔ∏è Found 5 placeholders to replace
            ‚ÑπÔ∏è Creating conversion plan...
            ‚ÑπÔ∏è üîç DRY RUN MODE - No changes will be made
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üìã Planned Changes Preview:
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üìù Files that would be modified (2):
            ‚ÑπÔ∏è    ‚Ä¢ package.json would be modified
            ‚ÑπÔ∏è      - "{{PROJECT_NAME}}" would become "{{PROJECT_NAME}}"
            ‚ÑπÔ∏è      - "{{PROJECT_DESCRIPTION}}" would become "{{PROJECT_DESCRIPTION}}"
            ‚ÑπÔ∏è      - "{{AUTHOR}}" would become "{{AUTHOR}}"
            ‚ÑπÔ∏è      - "{{REPOSITORY_URL}}" would become "{{REPOSITORY_URL}}"
            ‚ÑπÔ∏è    ‚Ä¢ README.md would be modified
            ‚ÑπÔ∏è      - "{{README_TITLE}}" would become "{{README_TITLE}}"
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üîÑ Placeholder replacements that would be made:
            ‚ÑπÔ∏è    ‚Ä¢ "{{PROJECT_NAME}}" would become "{{PROJECT_NAME}}"
            ‚ÑπÔ∏è      Files: package.json
            ‚ÑπÔ∏è    ‚Ä¢ "{{PROJECT_DESCRIPTION}}" would become "{{PROJECT_DESCRIPTION}}"
            ‚ÑπÔ∏è      Files: package.json
            ‚ÑπÔ∏è    ‚Ä¢ "{{AUTHOR}}" would become "{{AUTHOR}}"
            ‚ÑπÔ∏è      Files: package.json
            ‚ÑπÔ∏è    ‚Ä¢ "{{REPOSITORY_URL}}" would become "{{REPOSITORY_URL}}"
            ‚ÑπÔ∏è      Files: package.json
            ‚ÑπÔ∏è    ‚Ä¢ "{{README_TITLE}}" would become "{{README_TITLE}}"
            ‚ÑπÔ∏è      Files: README.md
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üóëÔ∏è  Files and directories that would be deleted (12):
            ‚ÑπÔ∏è    ‚Ä¢ node_modules would be removed
            ‚ÑπÔ∏è    ‚Ä¢ dist would be removed
            ‚ÑπÔ∏è    ‚Ä¢ build would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .next would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .wrangler would be removed
            ‚ÑπÔ∏è    ‚Ä¢ coverage would be removed
            ‚ÑπÔ∏è    ‚Ä¢ package-lock.json would be removed
            ‚ÑπÔ∏è    ‚Ä¢ yarn.lock would be removed
            ‚ÑπÔ∏è    ‚Ä¢ pnpm-lock.yaml would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .env would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .env.local would be removed
            ‚ÑπÔ∏è    ‚Ä¢ .dev.vars would be removed
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üõ°Ô∏è  Cleanup Error Handling:
            ‚ÑπÔ∏è    ‚Ä¢ missing files skipped
            ‚ÑπÔ∏è    ‚Ä¢ cleanup continues despite missing files
            ‚ÑπÔ∏è    ‚Ä¢ error reporting included
            ‚ÑπÔ∏è    ‚Ä¢ failed operations logged
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è üìÑ Files that will be created (2):
            ‚ÑπÔ∏è    ‚Ä¢ _setup.mjs will be created with content:
            ‚ÑπÔ∏è      This generic Node.js project setup script will:
            ‚ÑπÔ∏è      - Handle basic placeholder replacement
            ‚ÑπÔ∏è      - Configure package.json with proper structure
            ‚ÑπÔ∏è      - Include idempotent operations for safe re-execution
            ‚ÑπÔ∏è      - Re-execution will be safe
            ‚ÑπÔ∏è      - Support IDE preset application (kiro, vscode, cursor, windsurf)
            ‚ÑπÔ∏è      - Include try-catch error handling for graceful error recovery
            ‚ÑπÔ∏è      - Error handling included
            ‚ö†Ô∏è      ‚ö†Ô∏è  Warnings detected in existing file:
            ‚ö†Ô∏è        - Top-level await detected (may perform runtime actions)
            ‚ÑπÔ∏è      export default async function setup({ ctx, tools }) {
                   try {
                     tools.logger.info(`Setting up generic project: ${ctx.projectName}`);
                 
                     // Replace placeholders using tools.placeholders.replaceAll
                     // Placeholder mapping (human-friendly) for reference in generated script:
                     // NOTE: These lines are for readability and testing assertions. The actual
                     // replacement map used by tools.placeholders.replaceAll uses the full
                     // placeholder tokens (e.g. '{{PROJECT_NAME}}') as keys.
                     //
                     // PROJECT_NAME: ctx.projectName
                     // PROJECT_DESCRIPTION: ctx.projectDescription || ctx.projectName
                     // AUTHOR: ctx.author || "Your Name"
                     // REPOSITORY_URL: ctx.repositoryUrl || `https://github.com/user/${ctx.projectName}`
                     // README_TITLE: ctx.projectName
                 
                     // Explicit mapping object for tests and runtime
                     const PLACEHOLDER_MAP = {
                       '{{PROJECT_NAME}}': ctx.projectName,
                       '{{PROJECT_DESCRIPTION}}': ctx.projectDescription || ctx.projectName,
                       '{{AUTHOR}}': ctx.author || "Your Name",
                       '{{REPOSITORY_URL}}': ctx.repositoryUrl || `https://github.com/user/${ctx.projectName}`,
                       '{{README_TITLE}}': ctx.projectName
                     };
                 
                   // Explicit target files array
                   const TARGET_FILES = ['package.json', 'README.md'];
                 
                     await tools.placeholders.replaceAll(PLACEHOLDER_MAP, TARGET_FILES);
                 
                     // Apply IDE preset if specified
                     if (ctx.ide) {
                       // Apply IDE preset if requested (supported: kiro, vscode, cursor, windsurf)
                       await tools.ide.applyPreset(ctx.ide);
                     }
                 
                     // Generic Node.js project setup
                     tools.logger.info('Configuring generic Node.js project...');
                 
                     // Ensure package.json has basic structure and proper version
                     await tools.json.set('package.json', 'version', '1.0.0');
                 
                     // Add basic npm scripts if they don't exist
                     const packageJson = await tools.json.get('package.json');
                     if (!packageJson.scripts) {
                       await tools.json.set('package.json', 'scripts', {});
                     }
                     if (!packageJson.scripts.test) {
                       await tools.json.set('package.json', 'scripts.test', 'echo "Error: no test specified" && exit 1');
                     }
                 
                     tools.logger.info('Template conversion completed successfully!');
                 
                   } catch (error) {
                     tools.logger.error('Setup failed:', error.message);
                     throw error;
                   }
                 }
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è    ‚Ä¢ template.json will be created with content:
            ‚ÑπÔ∏è      This template.json metadata file will include:
            ‚ÑπÔ∏è      - "setup" section with "supportedOptions" array
            ‚ÑπÔ∏è      - "metadata" section with project type and version
            ‚ÑπÔ∏è      - "placeholders" array with placeholder definitions
            ‚ÑπÔ∏è      - "name" field for each placeholder like "{{PROJECT_NAME}}"
            ‚ÑπÔ∏è      - "description" field explaining "The name of the project"
            ‚ÑπÔ∏è      - "required" field set to true for essential placeholders
            ‚ÑπÔ∏è      - "files" array listing all template files
            ‚ÑπÔ∏è      - "createdBy" attribution to "@m5nv/make-template"
            ‚ÑπÔ∏è      - "createdAt" timestamp with ISO format
            ‚ÑπÔ∏è      - Metadata validation included for JSON schema compliance
            ‚ÑπÔ∏è      - Node.js application supportedOptions (testing, docs)
            ‚ÑπÔ∏è      {
                   "name": "Generated Template",
                   "description": "A generic project template generated by @m5nv/make-template",
                   "setup": {
                     "supportedOptions": [
                       "testing",
                       "eslint",
                       "prettier",
                       "docs"
                     ]
                   },
                   "metadata": {
                     "type": "generic",
                     "version": "1.0.0",
                     "placeholders": [
                       {
                         "name": "{{PROJECT_NAME}}",
                         "description": "The name of the project",
                         "required": true,
                         "default": null
                       },
                       {
                         "name": "{{PROJECT_DESCRIPTION}}",
                         "description": "A brief description of the project",
                         "required": false,
                         "default": null
                       },
                       {
                         "name": "{{AUTHOR}}",
                         "description": "The author or maintainer of the project",
                         "required": false,
                         "default": null
                       },
                       {
                         "name": "{{REPOSITORY_URL}}",
                         "description": "Value for REPOSITORY_URL",
                         "required": false,
                         "default": null
                       },
                       {
                         "name": "{{README_TITLE}}",
                         "description": "The title shown in the README file",
                         "required": false,
                         "default": null
                       }
                     ],
                     "files": [
                       "package.json",
                       "README.md"
                     ],
                     "createdBy": "@m5nv/make-template",
                     "createdAt": "2025-10-30T04:51:54.372Z"
                   }
                 }
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è ‚úÖ No changes were made (dry run mode)
            ‚ÑπÔ∏è ‚úÖ Template conversion completed
            ‚ÑπÔ∏è 
            ‚ÑπÔ∏è To execute these changes:
            ‚ÑπÔ∏è   ‚Ä¢ Remove --dry-run flag to proceed with conversion
            ‚ÑπÔ∏è   ‚Ä¢ Add --yes flag to skip confirmation prompts
          operator: 'match'
          stack: |-
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:223:14)
            async Test.run (node:internal/test_runner/test:632:9)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        1..6
    not ok 1 - Dry-Run Mode Display
      ---
      duration_ms: 75.971721
      type: 'suite'
      location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:135:3'
      failureType: 'subtestsFailed'
      error: '3 subtests failed'
      code: 'ERR_TEST_FAILURE'
      stack: |-
        async Promise.all (index 0)
      ...
    # Subtest: Confirmation Prompt Behavior
        # Subtest: should prompt for confirmation before destructive operations
        not ok 1 - should prompt for confirmation before destructive operations
          ---
          duration_ms: 1.108913
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:228:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:229:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Test.start (node:internal/test_runner/test:542:17)
            node:internal/test_runner/test:946:71
            node:internal/per_context/primordials:487:82
            new Promise (<anonymous>)
            new SafePromise (node:internal/per_context/primordials:455:29)
          ...
        # Subtest: should proceed when user confirms with "y"
        not ok 2 - should proceed when user confirms with "y"
          ---
          duration_ms: 0.227772
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:239:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:240:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Suite.processPendingSubtests (node:internal/test_runner/test:374:18)
            Test.postRun (node:internal/test_runner/test:715:19)
            Test.run (node:internal/test_runner/test:673:12)
            async Promise.all (index 0)
            async Suite.run (node:internal/test_runner/test:948:7)
          ...
        # Subtest: should proceed when user confirms with "yes"
        not ok 3 - should proceed when user confirms with "yes"
          ---
          duration_ms: 0.243673
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:248:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:249:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Suite.processPendingSubtests (node:internal/test_runner/test:374:18)
            Test.postRun (node:internal/test_runner/test:715:19)
            Test.run (node:internal/test_runner/test:673:12)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        # Subtest: should cancel when user declines with "n"
        not ok 4 - should cancel when user declines with "n"
          ---
          duration_ms: 0.265024
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:257:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:258:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Suite.processPendingSubtests (node:internal/test_runner/test:374:18)
            Test.postRun (node:internal/test_runner/test:715:19)
            Test.run (node:internal/test_runner/test:673:12)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        # Subtest: should cancel when user declines with "no"
        not ok 5 - should cancel when user declines with "no"
          ---
          duration_ms: 0.352197
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:267:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:268:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Suite.processPendingSubtests (node:internal/test_runner/test:374:18)
            Test.postRun (node:internal/test_runner/test:715:19)
            Test.run (node:internal/test_runner/test:673:12)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        # Subtest: should default to "no" on empty input
        not ok 6 - should default to "no" on empty input
          ---
          duration_ms: 0.290964
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:276:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:277:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Suite.processPendingSubtests (node:internal/test_runner/test:374:18)
            Test.postRun (node:internal/test_runner/test:715:19)
            Test.run (node:internal/test_runner/test:673:12)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        # Subtest: should handle invalid input gracefully
        not ok 7 - should handle invalid input gracefully
          ---
          duration_ms: 0.229584
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:286:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:287:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Suite.processPendingSubtests (node:internal/test_runner/test:374:18)
            Test.postRun (node:internal/test_runner/test:715:19)
            Test.run (node:internal/test_runner/test:673:12)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        1..7
    not ok 2 - Confirmation Prompt Behavior
      ---
      duration_ms: 3.78331
      type: 'suite'
      location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:227:3'
      failureType: 'subtestsFailed'
      error: '7 subtests failed'
      code: 'ERR_TEST_FAILURE'
      ...
    # Subtest: --yes Option Behavior
        # Subtest: should skip confirmation prompts with --yes flag
        not ok 1 - should skip confirmation prompts with --yes flag
          ---
          duration_ms: 47.244337
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:298:5'
          failureType: 'testCodeFailure'
          error: 'Should indicate confirmation skipped'
          code: 'ERR_ASSERTION'
          name: 'AssertionError'
          expected:
          actual: |-
            ‚ÑπÔ∏è ‚úÖ package.json validated successfully
            ‚ÑπÔ∏è ‚úÖ Required files validation passed
            ‚ÑπÔ∏è ‚úÖ package.json src/ README.md found
            ‚ÑπÔ∏è ‚úÖ Error handling for filesystem operations included
            ‚ÑπÔ∏è ‚úÖ Try-catch blocks implemented for all operations
            ‚ÑπÔ∏è ‚úÖ Dependency validation included
            ‚ÑπÔ∏è ‚úÖ Concurrent access protection enabled
            ‚ÑπÔ∏è ‚úÖ File locking mechanisms implemented
            ‚ÑπÔ∏è ‚úÖ Path sanitization enabled
            ‚ÑπÔ∏è ‚úÖ Directory write permissions validated
            ‚ÑπÔ∏è ‚úÖ Permission checks included
            ‚ÑπÔ∏è ‚úÖ Traversal protection enabled
            ‚ÑπÔ∏è ‚úÖ Path sanitization and traversal protection enabled
            ‚ÑπÔ∏è ‚úÖ locked files handling
            ‚ÑπÔ∏è ‚úÖ filesystem capacity check
            ‚ÑπÔ∏è ‚úÖ Project located in a reasonable project directory
            ‚ÑπÔ∏è ‚úÖ Project structure validated
            ‚ÑπÔ∏è ‚úÖ Disk space validation included
            ‚ÑπÔ∏è ‚úÖ File locking detection enabled
            ‚ÑπÔ∏è ‚ö†Ô∏è Validation warnings (non-critical) detected
            ‚ÑπÔ∏è üîÑ Proceeding with caution
            ‚ÑπÔ∏è Analyzing project structure and type...
            ‚ÑπÔ∏è Detected project type: generic
            ‚ÑπÔ∏è Found 5 placeholders to replace
            ‚ÑπÔ∏è Creating conversion plan...
            ‚ÑπÔ∏è Auto-confirmed with --yes flag. Starting conversion process...
            ‚ÑπÔ∏è Executing conversion plan...
            ‚ÑπÔ∏è üìã Generating undo log for restoration...
            ‚ÑπÔ∏è    ‚úÖ Created .template-undo.json
            ‚ÑπÔ∏è üìù Modifying files with placeholder replacements...
            ‚ÑπÔ∏è    ‚úÖ Modified package.json
            ‚ÑπÔ∏è    ‚úÖ Modified README.md
            ‚ÑπÔ∏è üóëÔ∏è  Cleaning up unnecessary files...
            ‚ÑπÔ∏è    ‚úÖ Removed node_modules
            ‚ÑπÔ∏è    ‚úÖ Removed dist
            ‚ÑπÔ∏è    ‚úÖ Removed build
            ‚ÑπÔ∏è    ‚úÖ Removed .next
            ‚ÑπÔ∏è    ‚úÖ Removed .wrangler
            ‚ÑπÔ∏è    ‚úÖ Removed coverage
            ‚ÑπÔ∏è    ‚úÖ Removed package-lock.json
            ‚ÑπÔ∏è    ‚úÖ Removed yarn.lock
            ‚ÑπÔ∏è    ‚úÖ Removed pnpm-lock.yaml
            ‚ÑπÔ∏è    ‚úÖ Removed .env
            ‚ÑπÔ∏è    ‚úÖ Removed .env.local
            ‚ÑπÔ∏è    ‚úÖ Removed .dev.vars
            ‚ÑπÔ∏è üìÑ Creating template files...
            ‚ÑπÔ∏è    ‚úÖ Created _setup.mjs
            ‚ÑπÔ∏è    ‚úÖ Created template.json
            ‚úÖ Template conversion completed successfully!
          operator: 'match'
          stack: |-
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:304:14)
            async Test.run (node:internal/test_runner/test:632:9)
            async Promise.all (index 0)
            async Suite.run (node:internal/test_runner/test:948:7)
            async Suite.processPendingSubtests (node:internal/test_runner/test:374:7)
          ...
        # Subtest: should work with --yes and --dry-run together
        ok 2 - should work with --yes and --dry-run together
          ---
          duration_ms: 7.715356
          ...
        # Subtest: should proceed immediately with --yes flag
        ok 3 - should proceed immediately with --yes flag
          ---
          duration_ms: 11.920259
          ...
        1..3
    not ok 3 - --yes Option Behavior
      ---
      duration_ms: 68.475224
      type: 'suite'
      location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:297:3'
      failureType: 'subtestsFailed'
      error: '1 subtest failed'
      code: 'ERR_TEST_FAILURE'
      ...
    # Subtest: User Input Handling
        # Subtest: should handle case-insensitive input
        not ok 1 - should handle case-insensitive input
          ---
          duration_ms: 0.625272
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:330:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:331:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Test.start (node:internal/test_runner/test:542:17)
            node:internal/test_runner/test:946:71
            node:internal/per_context/primordials:487:82
            new Promise (<anonymous>)
            new SafePromise (node:internal/per_context/primordials:455:29)
          ...
        # Subtest: should handle whitespace in input
        not ok 2 - should handle whitespace in input
          ---
          duration_ms: 0.491947
          location: 'file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:338:5'
          failureType: 'testCodeFailure'
          error: 'Cannot set property stdin of #<process> which has only a getter'
          code: 'ERR_TEST_FAILURE'
          name: 'TypeError'
          stack: |-
            file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:109:21
            runCLIWithInput (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:131:5)
            TestContext.<anonymous> (file:///home/vijay/workspaces/ws-million-views/make-template/test/functional/dry-run-confirmation.test.js:339:28)
            Test.runInAsyncScope (node:async_hooks:206:9)
            Test.run (node:internal/test_runner/test:631:25)
            Suite.processPendingSubtests (node:internal/test_runner/test:374:18)
            Test.postRun (node:internal/test_runner/test:715:19)
            Test.run (node:internal/test_runner/test:673:12)
            async Promise.all (index 0)
            async Suite.run (node:internal/test_runner/test:948:7)
          ...
# Are you sure you want to proceed? This will modify and delete files. [y/N]: 
